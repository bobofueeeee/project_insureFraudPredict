## 评估指标

### 特征评估

覆盖率、缺失率、零值率

KS、PSI（评估两个时间段特征分布差异的度量）、IV（评估好坏用户分布差异的度量）

Boruta: 将原始数据随机打乱，然后合并一起训练，比较原始和打乱后的重要程度（RandomForest,lightgbm,xgboost中的包含的feature_importances_），提出原始重要程度不如打乱后的数据

方差膨胀系数(VIF_ev)：一个特征是其他一组特征的线性组合，去掉
REF递归特征消除：把模型性能下降最少的特征去掉

基于L1（L1正则化）的特征选择：线性回归+ L1正则化 = 







### 模型评估



```
3）混淆矩阵、查准率tp/tp + fp（预测结果为正中真实正例的比例）、召回率（真实为正例中，预测结果为正的比例）tp / tp + FN，F1-score（精确率和正确率的调和平均）
4）roc曲线，横坐标FPR假阳性率（fp/fp+tn）,纵坐标TPF真阳性率（TP/TP+FN）,roc曲线中最理想的点为(0,1)此时，fp=fn=0，auc就是ROC曲线的面积
```

在数据挖掘中，模型评估指标是用于衡量模型性能的重要工具。这些指标有助于我们了解模型的预测能力、泛化能力以及其他关键特性。以下是一些常用的数据挖掘模型评估指标：

**一、分类模型评估指标**

1. **准确率（Accuracy）**：模型正确预测的样本数占总样本数的比例。但是，当数据存在类别不平衡时，准确率可能不是一个很好的指标。
2. **精确率（Precision）**：被模型预测为正类的样本中真正为正类的样本所占的比例。
3. **召回率（Recall）**：实际为正类的样本中被模型预测为正类的样本所占的比例。
4. **F1值（F1 Score）**：精确率和召回率的调和平均值，用于综合评估模型性能。
5. **ROC曲线与AUC值**：ROC曲线是以假阳率为横坐标、真阳率为纵坐标绘制的曲线，AUC是ROC曲线下的面积，用于评估分类模型的性能。

**二、回归模型评估指标**

1. **均方误差（MSE）**：预测值与真实值之差的平方的平均值。
2. **均方根误差（RMSE）**：均方误差的平方根，与原始数据的单位相同，更易于解释。
3. **平均绝对误差（MAE）**：预测值与真实值之差的绝对值的平均值。
4. **R方值（R² Score）**：表示模型对数据的拟合程度，值越接近1，说明模型拟合效果越好。

**三、聚类模型评估指标**

1. **轮廓系数（Silhouette Score）**：用于评估聚类效果，综合考虑了簇内的稠密程度和簇间的离散程度。
2. **卡林斯基-哈拉巴斯指数（Calinski-Harabasz Index）**：通过计算类间离散度和类内离散度的比值来评估聚类效果。
3. **戴维斯-布尔丁指数（Davies-Bouldin Index）**：通过计算各类别间的平均距离与类别内部距离的比值来评估聚类效果。

除了上述指标外，还有一些其他的模型评估指标，如混淆矩阵、提升度、支持度等，具体使用哪种指标取决于模型的类型和应用场景。在选择评估指标时，应考虑到数据的特性、模型的目标以及业务的需求。



### 模型监控

1）内部特征监控，放款前特征报表监控(缺失率、零值率、PSI)，例如：数据缺失率逐渐稳定，某个数据趋势率突然攀升；放款后特征报表监控(AUC/KS)；分箱比例监控

2）外部特征评估，外部数据的报表监控（缺失率、零值率、覆盖率(交集/内部，如果付费，切换到内部数据，)、PSI、AUC/KS），提高模型准确率，避免未来信息(上线后时间验证)，避免内部数据泄露(hash加密)，避免三方公司对结果美化(加入假样本)





## 模型调优

```python
## mode_095_02.py 0.95的调优手段
# 1. 日期，加入日期差新字段，删除了原来的日期
# 2. 判断各字段与fraud的相关性，删了age、policy_id、injury_claim3个字段(这三个字段，与其他字段相关性高于0.6，说明重复，故删去)
# 3. 对十个以上的变量进行meanencoder，我的理解：对较多的连续性变量，求平均值，怎么求的，待研究
# 4. 多模型训练，对多模型的训练结果K折交叉检验，选取最优的模型
```

```python
## mode_095.py 0.95的调优手段
# 1. 日期，对日期的格式进行了转换
# 2. 其中12个字段，转换为了字符
# 3. 使用了交叉验证，交叉验证引入了data_y，在交叉验证中，对所有概率求平均值
# 4. 使用的是CatBoostClassifier模型
```

```shell
## 在自己训练的模型中，模型的参数，是对最后结果影响最大的因素
## 所以，接下来重点实验的调优方法，网格调参、
```

